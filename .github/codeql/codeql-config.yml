# CodeQL configuration for vc-lab-platform
# This file configures custom query paths and filtering options
#
# Note: CodeQL Model Packs are NOT supported for Go language.
# We use query-filters to handle validated code patterns.
# See: https://docs.github.com/en/code-security/code-scanning/creating-an-advanced-setup-for-code-scanning/customizing-your-advanced-setup-for-code-scanning

name: "Custom CodeQL Configuration"

# Use the default queries plus security-and-quality
queries:
  - uses: security-and-quality

# Path filters - exclude test files and vendor directories
paths-ignore:
  - "**/vendor/**"
  - "web/node_modules/**"

# Query filters to handle false positives from validated code
# Our codebase uses:
# - internal/sanitize.ValidateGitURL() for git URL validation
# - internal/sanitize.ValidateGitBranch() for branch name validation
# - internal/sanitize.ForLog() for log output sanitization
# These are manually reviewed and marked with #nosec comments
query-filters:
  # Exclude command injection alerts - our exec.Command calls use validated inputs
  # via ValidateGitURL/ValidateGitBranch which enforce strict patterns
  - exclude:
      id: go/command-injection
  # Exclude log injection alerts - all logged values are sanitized via
  # sanitize.ForLog() which removes control characters
  - exclude:
      id: go/log-injection
